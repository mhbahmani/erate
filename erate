#!/bin/bash

connection_checking_url="google.com"

dollar_price_link="https://www.tgju.org/chart/price_dollar_rl"
data_backups_dir="$HOME/.local/share/snc"
dollor_price_file="$data_backups_dir/dollor.txt"


check_internet_connection(){
        connection=$(ping -q -w 5 -c 1 $connection_checking_url > /dev/null 2>&1 && echo 1 || echo 0)
        return $connection
}

get_dollar_price(){
	response=$(wget -q -O- $dollar_price_link | grep -E "نرخ فعلی:|زمان ثبت آخرین نرخ:")
	dollar_price=$(echo $response | cut -d '>' -f 5 | cut -d '<' -f 1)
	last_update=$(echo $response | cut -d '>' -f 11 | cut -d '<' -f 1)
}

show_info(){
	exchange=$1
	price=$2
	last_update=$3
        echo "$exchange Price: $price"
        echo "Last Update: $last_update"
	
}
help(){
	echo "help!"
}

case $1 in
        dollar | d)
                get_dollar_price
		show_info "Dollar" $dollar_price $last_update
                ;;
        --help | -h) 
                help
                ;;
        *)
		echo "all exchanges"
                ;;
esac
